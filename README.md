# Unity RPG 游戏

一款使用 Unity 开发的 2D 动作 RPG 游戏，具有多种战斗能力、敌人 AI 状态机和完整的技能系统。

## 🎮 游戏特色

### 玩家系统
- **状态机战斗**: 待机、移动、跳跃、攻击、冲刺、反击和特殊技能
- **技能系统**: 
  - 飞剑技能（瞄准、投掷、接剑）
  - 冲刺攻击
  - 黑洞技能配合分身攻击
  - 暗杀技能实现传送
  - 雷击和水晶技能
- **装备系统**: 武器、护甲、饰品、药品附带属性加成
- **背包管理**: 物品、装备、消耗品（药水）
- **元素效果**: 火焰（点燃）、冰霜（减速）、雷电（电击）

### 敌人 AI
- **夜生者 Boss**: 多阶段 Boss 具有各种状态
  - 移动、战斗、攻击、格挡、眩晕、死亡状态
  - 聚能状态用于治疗
  - 飞剑状态进行远程元素攻击
  - 魔法阵攻击
  - 传送能力
- **骷髅敌人**: 基础 AI 战斗模式
- **史莱姆敌人**: 分裂机制（大型 → 中型 → 小型）

### 战斗系统
- **伤害类型**: 物理、魔法
- **状态效果**: 
  - 点燃：持续伤害
  - 冰冻：移动速度降低和护甲降低
  - 电击：闪电链打击和命中率降低
- **格挡系统**: 玩家可在敌人攻击时振刀弹反
- **击退效果**: 基于攻击方向的定向击退

### UI 系统
- **游戏内 HUD**: 血条、耐力条、货币显示
- **背包界面**: 物品槽、装备管理
- **技能树**: 可解锁的能力和条件
- **音量控制**: 独立的音效和背景音乐音量滑块
- **制作系统**: 物品创建和材料管理

### 存档系统
- **游戏数据持久化**: 玩家进度、背包、解锁技能
- **检查点系统**: 游戏中的存档点
- **设置保存**: 音量偏好、游戏设置

## 🛠️ 技术架构

### 核心系统
- **实体系统**: 所有游戏实体的基类（玩家、敌人）
- **状态机模式**: 用于玩家状态和敌人 AI
- **组件化设计**: 模块化的统计、效果和行为系统
- **事件系统**: 系统间的解耦通信

### 关键脚本
- `Player.cs`: 带状态机的主玩家控制器
- `Enemy.cs`: 带 AI 和战斗的基敌人类
- `CharacterStats.cs`: 带修饰符和状态效果的统计系统
- `SkillManager.cs`: 集中式技能管理
- `AudioManager.cs`: 声音和音乐管理
- `SaveManager.cs`: 游戏数据持久化

### 文件结构
```
Assets/Script/
├── Player/           # 玩家状态和行为
├── Enemy/            # 敌人 AI 和行为
│   ├── NightBorn/   # Boss 特定脚本
│   ├── Skeleton/    # 骷髅敌人脚本
│   └── Slime/       # 史莱姆敌人脚本
├── Skills/          # 技能系统和能力
├── Stats/           # 角色统计
├── Item/            # 背包和装备
├── UI/              # 用户界面组件
├── Managers/        # 游戏管理系统
└── Save_And_load/   # 存档系统
```

## 🎯 游戏机制

### 战斗流程
1. **检测**: 敌人检测玩家并进入战斗状态
2. **交战**: 攻击模式和玩家反应的战斗
3. **状态效果**: 元素伤害和减益
4. **特殊能力**: Boss 阶段和玩家技能
5. **解决**: 胜利/失败及奖励

### Boss 战（夜生者）
- **阶段 1**: 基础战斗配合移动和攻击
- **阶段 2**: 聚能状态用于治疗（可中断）
- **阶段 3**: 剑气攻击配合元素弹幕
- **阶段 4**: 魔法阵攻击
- **特殊**: 传送到玩家身后

## 🎵 音频系统
- **音效**: 战斗声音、UI 反馈、环境音效
- **背景音乐**: 动态音乐系统，不同区域/Boss 有不同音轨
- **音量控制**: 独立的音效和背景音乐滑块，集成 AudioMixer

## 💾 存档系统
- **玩家数据**: 统计、背包、装备、货币
- **进度**: 解锁技能、完成区域、宝箱状态
- **设置**: 音量级别、游戏偏好
- **检查点**: 进度存档点

## 🔧 安装说明

1. **Unity 版本**: 兼容 Unity 2022.3 LTS 或更新版本
2. **依赖项**: 
   - TextMeshPro
   - Cinemachine（用于相机效果）
   - Input System（用于玩家控制）
3. **音频设置**: 配置 AudioMixer 组用于音效和背景音乐音量控制
4. **层级设置**: 配置 Physics2D 碰撞矩阵用于正确的交互

## 🎮 操作控制
- **移动**: WASD 或方向键
- **跳跃**: 空格键
- **攻击**: 鼠标左键
- **冲刺**: Q
- **技能**: C（水晶）、X（暗杀）、H（药水）
- **背包**: Tab 或 I

## 📝 开发说明

### 状态机模式
游戏广泛使用状态机模式来处理玩家和敌人行为，提供清晰的关注点分离和易于扩展性。

### 元素系统
元素伤害系统支持三种类型：火焰（点燃）、冰霜（减速）、雷电（电击），每种都有独特的视觉和游戏效果。

### Boss 设计
夜生者 Boss 展示了高级 AI，具有多个阶段、可中断的能力和基于玩家动作的动态行为。

## 🤝 贡献
此项目展示了各种 Unity 游戏开发模式和技术。欢迎用作参考或扩展额外功能。

## 📄 许可证
此项目仅用于教育和演示目的。
